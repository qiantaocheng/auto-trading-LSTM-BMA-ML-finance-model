# 实验5（完整5-fold CV）执行状态

## 执行信息
- **脚本**: `scripts/experiment_5_full_5fold.py`
- **方法**: 完整的5-fold CV训练获取真实的OOF预测
- **状态**: 正在后台运行中...

---

## 关键区别说明

### OOF (Out-of-Fold) 预测
- **时间范围**: 训练期内（2021-01-19 到 2024-12-16）
- **数据来源**: 通过5-fold CV分割训练数据获得
- **用途**: 训练第二层模型（MetaRankerStacker）
- **期望**: 应该与测试集性能接近（如果没有数据泄露）

### 测试集预测
- **时间范围**: 训练期外（2024-12-17 到 2025-01-23，80/20分割的后20%）
- **数据来源**: 时间分割的未来数据
- **用途**: 评估模型的真实泛化能力
- **期望**: 应该与OOF性能接近（如果没有数据泄露）

---

## 实验设计

### 步骤1: 提取OOF预测
- 运行完整的5-fold CV训练
- 提取所有fold的验证集预测
- 计算OOF IC和Rank IC

### 步骤2: 提取测试集预测
- 从80/20评估报告中获取
- 计算测试集IC和Rank IC

### 步骤3: 比较
- 计算IC差异
- 检测泄露信号

---

## 泄露检测标准

### 正常情况
- OOF IC ≈ 测试集IC（差异 < 0.1）
- 说明模型在训练期和测试期的表现一致

### 异常情况（数据泄露）
- OOF IC >> 测试集IC（差异 > 0.2）
- 说明OOF预测可能使用了测试集信息

### 泄露信号
- ⚠️ OOF IC >> 测试集IC（差异 > 0.1）
- ⚠️ OOF Rank IC >> 测试集Rank IC（差异 > 0.1）
- ⚠️ OOF IC异常高（> 0.9）
- ⚠️ IC差异过大（> 0.2）

---

## 预期结果

### 如果检测到泄露
- ElasticNet: OOF IC >> 测试集IC（简化版显示差异0.9539）
- XGBoost: OOF IC异常高（简化版显示0.9652）
- 需要检查特征标准化和CV分割

### 如果没有泄露
- OOF IC ≈ 测试集IC
- 说明模型训练正确，没有数据泄露

---

## 执行时间

完整的5-fold CV训练可能需要：
- **子集数据**: 约30-60分钟
- **完整数据**: 约2-4小时

---

## 输出文件

训练完成后，将生成：
- `experiment_5_full_5fold_results_YYYYMMDD_HHMMSS.json` - 完整结果
- 包含OOF IC、测试集IC、差异分析等

---

## 下一步

1. **等待训练完成**
2. **查看结果文件**
3. **分析OOF vs 测试集性能差异**
4. **如果检测到泄露，检查特征标准化和CV分割**

---

**创建时间**: 2026-01-23
**状态**: 正在运行中...
