temporal:
  random_state: 42
  prediction_horizon_days: 5
  holding_period_days: 5
  feature_lag_days: 1
  cv_gap_days: 5
  cv_embargo_days: 5
  oos_embargo_days: 5
  effective_isolation_days: 20
  safety_gap_days: 1
  min_total_gap_days: 5
  cv_n_splits: 6
  cv_test_ratio: 0.12
  min_train_test_gap_days: 5
  min_train_window_days: 252
  sample_weight_half_life_days: 75
  min_rank_ic: 0.02
  min_t_stat: 2.0
  min_coverage_months: 12
  min_qlike_reduction_pct: 0.12
validation_thresholds:
  production_ready_threshold: 0.8
  min_rank_ic: 0.01
  min_t_stat: 1.0
  min_stability_ratio: 0.5
  min_calibration_r2: 0.6
  max_correlation_median: 0.7
  enable_strict_target_validation: true
  min_target_correlation: 0.85
  critical_target_correlation: 0.6
  min_target_overlap: 100
  critical_target_overlap: 50
  oof:
    enable: true
    min_coverage: 0.7
    suspicious_threshold: 0.001
strict_mode:
  enable_strict_cv: false
  enable_determinism_strict: true
  enable_temporal_strict: true
  enable_feature_validation: true
  use_kronos_validation: true
  use_tradingagents: false
data:
  required_format: MultiIndex
  required_index_names:
  - date
  - ticker
  required_target_column: target
  min_features: 2
  max_risk_model_tickers: 50
  max_market_regime_tickers: 20
  max_alpha_data_tickers: 50
  risk_model_history_days: 300
  market_regime_history_days: 200
  alpha_data_history_days: 200
  min_data_days: 20
  min_risk_model_days: 100
  min_cross_sectional_stocks: 30
  min_oof_coverage: 0.5
  min_samples_per_model: 100
  min_samples_for_cv: 400
  batch_size: 50
  api_delay: 0.12
  max_retries: 3
features:
  beta_calculation_window: 60
  rsi_period: 14
  volatility_window: 20
  momentum_window: 20
  feature_selection:
    method: robust
    max_features: 25
    min_features: 5
    min_importance: 1e-6
    correlation_threshold: 0.95
  lag_optimization:
    enable: true
    max_lag: 5
    optimization_method: grid_search
  cross_sectional_standardization:
    enable: true
    min_valid_ratio: 0.5
    outlier_method: iqr
    outlier_threshold: 3.0
    fill_method: cross_median
    industry_neutral: false
    validation_samples: 30
  factor_decay:
    enable: true
    base_halflife: 30
    family_specific_halflives:
      momentum: 8
      reversal: 5
      volatility: 6
      quality: 60
      value: 90
      sentiment: 10
      volume: 7
      technical: 12
      fundamental: 120
      microstructure: 3
training:
  incremental_days: 14
  full_rebuild_days: 28
  cv_method: time_series_split
  cv_splits: 6
  cv_gap_days: 5
  cv_embargo_days: 5
  cv_min_train_size: 252
  test_size: 63
  cv_no_fallback: true
  extreme_target_filter:
    enabled: true
    method: hard_clip
    clip_lower: -0.55
    clip_upper: 0.55
  base_models:
    elastic_net:
      enable: true
      alpha: 0.0012
      l1_ratio: 0.15
      max_iter: 10000
      fit_intercept: true
      selection: random
      random_state: 42
    xgboost:
      enable: true
      n_estimators: 800
      max_depth: 5
      learning_rate: 0.02
      min_child_weight: 30
      subsample: 0.7
      colsample_bytree: 0.7
      reg_lambda: 10.0
      reg_alpha: 0.0
      gamma: 0.0
      random_state: 42
      verbosity: 0
    catboost:
      enable: true
      iterations: 3000
      depth: 6
      learning_rate: 0.02
      l2_leaf_reg: 20
      min_data_in_leaf: 500
      subsample: 0.7
      loss_function: RMSE
      random_state: 42
      verbose: false
      allow_writing_files: false
      thread_count: -1
      od_type: Iter
      od_wait: 120
    lightgbm_ranker:
      enable: true
      objective: regression
      boosting_type: gbdt
      n_estimators: 900
      num_leaves: 63
      max_depth: -1
      learning_rate: 0.045
      feature_fraction: 0.8
      bagging_fraction: 0.8
      bagging_freq: 5
      data_sample_strategy: bagging
      min_sum_hessian_in_leaf: 0.01
      min_gain_to_split: 0.01
      lambda_l1: 0.1
      lambda_l2: 15.0
      max_bin: 127
      verbose: -1
      random_state: 42
      n_jobs: -1
      fit_params:
        early_stopping_rounds: 150
        eval_metric: l2
    lambdarank:
      enable: true
      objective: lambdarank
      metric: ndcg
      ndcg_eval_at:
      - 10
      num_boost_round: 1200
      learning_rate: 0.04
      num_leaves: 15
      max_depth: 4
      min_data_in_leaf: 250
      lambda_l1: 0.0
      lambda_l2: 45.0
      feature_fraction: 0.9
      bagging_fraction: 0.75
      bagging_freq: 3
      lambdarank_truncation_level: 25
      sigmoid: 1.1
      n_quantiles: 32
      label_gain_power: 2.1
      fit_params:
        early_stopping_rounds: 100
  meta_ranker:
    enable: true
    objective: lambdarank
    metric: ndcg
    ndcg_eval_at:
    - 5
    - 15
    learning_rate: 0.005
    num_boost_round: 2000
    fit_params:
      early_stopping_rounds: 100
    num_leaves: 15
    max_depth: 3
    min_data_in_leaf: 500
    lambdarank_truncation_level: 60
    label_gain_power: 2.3
    sigmoid: 1.2
    lambda_l1: 2.0
    lambda_l2: 20.0
    feature_fraction: 0.7
    bagging_fraction: 0.6
    bagging_freq: 1
    n_quantiles: 64
    verbose: -1
    random_state: 42
    base_cols:
    - pred_catboost
    - pred_xgb
    - pred_lambdarank
    - pred_elastic
  bma_weighting:
    method: ic_based
    min_ic_threshold: 0.001
    normalize_weights: true
  enable_hyperparameter_tuning: true
  n_jobs: -1
  feature_selection_method: rolling_ic
  min_ic_threshold: 0.02
  meta_ensemble:
    method: ewa_with_prior
    lookback_days: 120
    rebalance: M
    ridge_lambda: 0.01
    non_negative: true
    normalize: true
    eta: 0.8
    cap: 0.9
    alpha: 0.9
    ic_metric: IC
    ic_window_days: 120
    lag_days: 1
    negative_ic_policy: clip0
    logging:
      track_daily_weights: true
      track_ic_curve: true
      max_weight_hhi: true
    tuning:
      eta_grid:
      - 0.5
      - 0.8
      - 1.0
      - 1.2
      ic_metric: ICIR
      strict_temporal_safety: true
evaluation:
  ic_calculation:
    use_rank_ic: true
    temporal_aggregation: ewm
    decay_halflife: 30
    min_samples: 5
  production_gate:
    min_rank_ic: 0.02
    min_t_stat: 2.0
    min_months: 12
    max_qlike: 0.12
professional_factors:
  enable: true
  decay_halflife: 30
  enable_decay: true
  categories:
  - technical
  - fundamental
  - sentiment
  - microstructure
  - alternative
adaptive_weights:
  weight_learning:
    enabled: true
    lookback_days: 252
    min_confidence: 0.6
    max_weight: 0.4
    min_weight: 0.05
    rebalance_frequency: 21
  fallback_weights:
    momentum: 0.35
    mean_reversion: 0.35
    quality: 0.3
  bma_weights:
    ic_thresholds:
      strong: 0.1
      weak: 0.05
      noise: 0.02
    weight_mapping:
      strong: 0.4
      weak: 0.2
      noise: 0.0
    base_models:
      ridge: 0.25
      xgboost: 0.3
      catboost: 0.2
      lightgbm_ranker: 0.25
ensemble:
  bma_weights:
    method: ic_weighted
    lookbook_window: 60
    min_ic_threshold: 0.01
  dynamic_weighting:
    enable: true
    update_frequency: 5
    weight_bounds:
    - 0.0
    - 0.5
error_handling:
  enable_retry: false
  max_retries: 0
  enable_fallback: false
  log_errors: true
  raise_on_critical: true
  fail_fast: true
  no_exception_masking: true
optimization:
  enable_memory_optimization: true
  max_memory_gb: 4
  gc_frequency: 100
  enable_parallel: true
  n_jobs: -1
  backend: threading
  enable_cache: true
  cache_size_mb: 500
  cache_ttl_seconds: 3600
logging:
  level: INFO
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  file: bma_ultra_enhanced.log
  max_size_mb: 100
  backup_count: 5
  suppress_modules:
  - matplotlib
  - sklearn
  - urllib3
module_thresholds:
  robust_feature_min_samples: 300
  isotonic_min_samples: 200
  stacking_min_oof_coverage: 0.3
  stacking_min_models: 2
  regime_min_samples: 500
  ridge_min_samples: 1000
alphas:
- name: momentum_5d
  function: momentum
  period: 5
  decay: 15
  enabled: true
- name: momentum_20d
  function: momentum
  period: 20
  decay: 20
  enabled: true
- name: mean_reversion_10d
  function: mean_reversion
  period: 10
  decay: 20
  enabled: true
- name: volatility_5d
  function: volatility
  period: 5
  decay: 8
  enabled: true
- name: volume_ratio
  function: volume_ratio
  period: 20
  decay: 10
  enabled: true
- name: rsi_14d
  function: rsi
  period: 14
  decay: 14
  enabled: true
- name: earnings_yield
  function: earnings_yield
  period: 252
  decay: 60
  enabled: true
- name: book_to_market
  function: pb_ratio
  period: 252
  decay: 60
  enabled: true
- name: roe_factor
  function: roe_neutralized
  period: 252
  decay: 60
  enabled: true
- name: piotroski_score
  function: piotroski_score
  period: 252
  decay: 90
  enabled: true
- name: altman_score
  function: altman_score
  period: 252
  decay: 90
  enabled: true
- name: low_beta
  function: low_beta
  period: 252
  decay: 60
  enabled: true
- name: idiosyncratic_vol
  function: idiosyncratic_vol
  period: 60
  decay: 20
  enabled: true
alpha_processing:
  winsorize_quantiles:
  - 0.01
  - 0.99
  standardization: cross_sectional
  neutralization:
    by_industry: false
    by_market_cap: false
storage:
  cache_dir: cache/factor_weights
  max_history_records: 20
  cleanup_frequency_days: 3
monitoring:
  log_weight_changes: false
  performance_tracking: false
default_tickers:
- AAPL
- MSFT
- AMZN
- NVDA
- GOOGL
- TSLA
- META
- BRK-B
- UNH
- JNJ
- JPM
- V
- MA
- BAC
- WMT
- PG
- HD
- DIS
- NFLX
- ADBE
eod_trading:
  strategy:
    double_trend:
      eod_mode: true
      run_after_close_min: 20
    execution:
      open_order_type: LOO
      avoid_open_auction: false
      limit_band_by_atr_mult: 0.5
      limit_band_floor_pct: 0.003
      limit_band_cap_pct: 0.015
      cancel_if_not_filled_minutes: 30
  risk_management:
    default_stop_pct: 0.01
    atr_trailing:
      enabled: true
      period: 14
      multiplier: 2.0
      activate_after_R: 1.0
      eod_update_only: true
  sizing:
    per_trade_risk_pct: 0.005
    max_position_pct_of_equity: 0.1
    base_dollar_amount: 10000
  timing:
    market_open_time: 09:30
    market_close_time: '16:00'
    eod_signal_delay_min: 20
  data_sources:
    primary: polygon
    backup: yahoo
    daily_bars_lookback: 200
  order_execution:
    default_exchange: SMART
    currency: USD
    enable_risk_validation: true
    enable_audit_logging: true
  monitoring:
    enable_alerts: true
    alert_channels:
    - email
    - log
    track_execution_metrics: true
pca:
  enabled: true
  method: separated
  variance_threshold: 0.95
  traditional_components: 10
  alpha_components: 5
  min_components: 1
  max_components_ratio: 0.8
  time_safe:
    min_history_days: 60
    refit_frequency: 21
    rolling_window_mode: true
  production:
    enable_caching: true
    cache_duration_hours: 24
    validation_threshold: 0.02

