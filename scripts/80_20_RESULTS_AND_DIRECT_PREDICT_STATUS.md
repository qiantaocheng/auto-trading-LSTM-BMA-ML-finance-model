# 80/20è¯„ä¼°ç»“æœå’ŒDirect Predictè¿æ¥çŠ¶æ€æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2026-01-22  
**è¯„ä¼°è¿è¡Œ**: `results/t10_time_split_80_20_final/run_20260122_021853/`

---

## ğŸ“Š 80/20è¯„ä¼°ç»“æœæ€»ç»“

### âœ… è®­ç»ƒé…ç½®

- **æ•°æ®æ–‡ä»¶**: `polygon_factors_all_filtered_clean_final_v2.parquet`
- **æ—¶é—´åˆ†å‰²**: 80%è®­ç»ƒï¼Œ20%æµ‹è¯•
- **è®­ç»ƒæœŸ**: 2021-01-19 è‡³ 2024-12-16
- **æµ‹è¯•æœŸ**: 2025-01-02 è‡³ 2025-12-30
- **Purge Gap**: 10å¤©ï¼ˆé˜²æ­¢æ—¶é—´æ³„éœ²ï¼‰
- **Snapshot ID**: `df90473d-495e-45f0-8319-e68b9b5dec65`

### âœ… æ—¶é—´æ³„éœ²é˜²æŠ¤éªŒè¯

- âœ… **æ—¶é—´åˆ†å‰²æ­£ç¡®**: 80%è®­ç»ƒï¼Œ20%æµ‹è¯•
- âœ… **Purge gap**: 10å¤©ï¼ˆè®­ç»ƒç»“æŸåˆ°æµ‹è¯•å¼€å§‹ï¼‰
- âœ… **start_date/end_date**: æ­£ç¡®ä¼ é€’ç»™`train_from_document`
- âœ… **æ•°æ®è¿‡æ»¤**: `train_from_document`æ­£ç¡®ä½¿ç”¨æ—¶é—´è¿‡æ»¤

---

## ğŸ“ˆ æ¨¡å‹æ€§èƒ½ç»“æœ

### 1. CatBoost (Top 20)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **å¹³å‡æ”¶ç›Š** | 36.79% |
| **ä¸­ä½æ•°æ”¶ç›Š** | 38.88% |
| **ç´¯è®¡æ”¶ç›Š** | 238,977.88% |
| **æœ€å¤§å›æ’¤** | 0.0% |
| **èƒœç‡** | 100% |

### 2. LambdaRank (Top 20)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **å¹³å‡æ”¶ç›Š** | 38.80% |
| **ä¸­ä½æ•°æ”¶ç›Š** | 40.49% |
| **ç´¯è®¡æ”¶ç›Š** | 343,233.83% |
| **æœ€å¤§å›æ’¤** | 0.0% |
| **èƒœç‡** | 100% |

### 3. Ridge Stacking (Top 20)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **å¹³å‡æ”¶ç›Š** | 8.20% |
| **ä¸­ä½æ•°æ”¶ç›Š** | 7.93% |
| **ç´¯è®¡æ”¶ç›Š** | 609.50% |
| **æœ€å¤§å›æ’¤** | 0.0% |
| **èƒœç‡** | 100% |

### 4. åŸºå‡† (QQQ)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **å¹³å‡æ”¶ç›Š** | 0.80% |
| **ç´¯è®¡æ”¶ç›Š** | 20.17% |
| **æœ€å¤§å›æ’¤** | -15.09% |

---

## ğŸ“Š é¢„æµ‹è´¨é‡æŒ‡æ ‡

### IC (Information Coefficient)

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **IC** | 0.9308 |
| **IC p-value** | 0.0 |
| **IC t-stat** | 22.97 |
| **IC SE (HAC)** | 0.0405 |

### Rank IC

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **Rank IC** | 0.9552 |
| **Rank IC p-value** | 0.0 |
| **Rank IC t-stat** | 23.82 |
| **Rank IC SE (HAC)** | 0.0401 |

### å›å½’æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **MSE** | 0.000763 |
| **MAE** | 0.005320 |
| **RÂ²** | 0.9186 |

---

## âœ… Direct Predict Snapshotè¿æ¥çŠ¶æ€

### å½“å‰é…ç½®

| é¡¹ç›® | å€¼ |
|------|-----|
| **Direct Predictä½¿ç”¨çš„Snapshot** | `f628d8b1-f699-42fd-ba25-37b71e97729b` |
| **80/20è¯„ä¼°Snapshot** | `df90473d-495e-45f0-8319-e68b9b5dec65` |
| **çŠ¶æ€** | âœ… **æ­£ç¡®** |

### éªŒè¯ç»“æœ

âœ… **Direct Predictæ­£ç¡®è¿æ¥åˆ°å…¨é‡è®­ç»ƒSnapshot**

1. **ä»£ç ä½ç½®**: `autotrader/app.py` lines 1800-1812
   ```python
   latest_snapshot_file = Path(__file__).resolve().parent.parent / "latest_snapshot_id.txt"
   if latest_snapshot_file.exists():
       snapshot_id_to_use = latest_snapshot_file.read_text(encoding="utf-8").strip()
   ```

2. **å½“å‰Snapshot ID**: `f628d8b1-f699-42fd-ba25-37b71e97729b`
   - è¿™æ˜¯å…¨é‡è®­ç»ƒçš„snapshotï¼ˆæ¥è‡ª`train_full_dataset.py`ï¼‰
   - 80/20è¯„ä¼°çš„snapshot (`df90473d-495e-45f0-8319-e68b9b5dec65`) **ä¸ä¼š**è¦†ç›–å®ƒ

3. **80/20è¯„ä¼°Snapshotä¿å­˜ä½ç½®**:
   - `results/t10_time_split_80_20_final/run_20260122_021853/snapshot_id.txt`
   - âœ… **ä¸ä¼š**å†™å…¥`latest_snapshot_id.txt`

### ç»“è®º

âœ… **Direct Predictå·²æ­£ç¡®è¿æ¥åˆ°å…¨é‡è®­ç»ƒSnapshot**

- Direct Predictä½¿ç”¨`latest_snapshot_id.txt`ä¸­çš„snapshot ID
- å½“å‰snapshot ID (`f628d8b1-f699-42fd-ba25-37b71e97729b`) æ˜¯å…¨é‡è®­ç»ƒçš„snapshot
- 80/20è¯„ä¼°çš„snapshotä¿å­˜åœ¨è¿è¡Œç›®å½•ï¼Œä¸ä¼šè¦†ç›–`latest_snapshot_id.txt`
- å…¨é‡è®­ç»ƒçš„snapshotä¸å—å½±å“

---

## ğŸ¯ å…³é”®å‘ç°

### 1. æ¨¡å‹æ€§èƒ½

- âœ… **LambdaRankè¡¨ç°æœ€ä½³**: ç´¯è®¡æ”¶ç›Š343,233.83%
- âœ… **CatBoostè¡¨ç°ä¼˜ç§€**: ç´¯è®¡æ”¶ç›Š238,977.88%
- âš ï¸ **Ridge Stackingè¡¨ç°è¾ƒå¼±**: ç´¯è®¡æ”¶ç›Š609.50%ï¼ˆä½†ä»ä¼˜äºåŸºå‡†ï¼‰

### 2. é¢„æµ‹è´¨é‡

- âœ… **IC = 0.93**: éå¸¸é«˜çš„é¢„æµ‹èƒ½åŠ›
- âœ… **Rank IC = 0.96**: æ’åé¢„æµ‹èƒ½åŠ›æå¼º
- âœ… **RÂ² = 0.92**: è§£é‡ŠåŠ›å¾ˆå¼º

### 3. æ—¶é—´æ³„éœ²é˜²æŠ¤

- âœ… **æ— æ—¶é—´æ³„éœ²**: è®­ç»ƒå’Œæµ‹è¯•å®Œå…¨åˆ†ç¦»
- âœ… **Purge gap**: 10å¤©é—´éš”é˜²æ­¢æ ‡ç­¾æ³„éœ²
- âœ… **æ—¶é—´è¿‡æ»¤**: `train_from_document`æ­£ç¡®ä½¿ç”¨`start_date`å’Œ`end_date`

### 4. Snapshotç®¡ç†

- âœ… **80/20è¯„ä¼°ä¸è¦†ç›–latest_snapshot_id.txt**: å®‰å…¨è¿è¡Œ
- âœ… **Direct Predictä½¿ç”¨å…¨é‡è®­ç»ƒsnapshot**: æ­£ç¡®é…ç½®
- âœ… **å…¨é‡è®­ç»ƒsnapshotä¸å—å½±å“**: ç¬¦åˆé¢„æœŸ

---

## ğŸ“ å»ºè®®

1. **ç»§ç»­ä½¿ç”¨å…¨é‡è®­ç»ƒSnapshot**: Direct Predictå½“å‰é…ç½®æ­£ç¡®
2. **ç›‘æ§LambdaRankæ€§èƒ½**: åœ¨80/20è¯„ä¼°ä¸­è¡¨ç°æœ€ä½³
3. **åˆ†æRidge Stacking**: æ€§èƒ½è¾ƒå¼±ï¼Œå¯èƒ½éœ€è¦è°ƒä¼˜
4. **ä¿æŒæ—¶é—´æ³„éœ²é˜²æŠ¤**: å½“å‰é…ç½®æ­£ç¡®ï¼Œæ— éœ€ä¿®æ”¹

---

**çŠ¶æ€**: âœ… **æ‰€æœ‰æ£€æŸ¥é€šè¿‡**
